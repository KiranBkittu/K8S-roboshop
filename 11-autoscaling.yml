apiVersion: apps/v1
kind: Deployment
metadata: 
  name: nginx-deployment
  labels:
    company: wipro
    employee: dev
spec: 
  replicas: 3 # deployment defination starts from here
  selector:
    matchLabels:
      company: wipro
      employee: dev
  template: # pod defination start from here
    metadata:
      labels:
        company: wipro
        employee: dev
    spec:
      containers:
        - name: nginx
          image: nginx
---
apiVersion: autoscaling/v2
kind: HorizontalPodAutoscaler
metadata:
  name: hpa-check
  labels:
        company: wipro
        employee: dev
spec:
  scaleTargetRef: #deployment or statefulset to scale
    apiVersion: v1
    kind: Deployment
    name: nginx-deployment
  minReplicas: 1
  maxReplicas: 5
  metrics: # CPU, memory, or custom metric
    - type: Resource  
      resource:  
        name: cpu
        target:
          type: Utilization
          averageUtilization: 5 # 70 is actual cpu limit for alert